{{ define "main" }}

<div class="sidebar">
  {{- $tocHTML := .TableOfContents -}}
  {{- $hasTOC := gt (len (findRE "<li>" $tocHTML)) 0 -}}
  {{ if or $hasTOC .Params.Toc }}
  <section class="toc">
      {{ .TableOfContents }}
    </section>
  {{ end }}
</div>

<article id="content">
  <div class="metadata">
    <h1>{{ .Title }}</h1>
    {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
    {{ $dateHuman := .Date | time.Format ":date_long" }}
    <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>

    <div class="taxonomy">
      <!-- Categories -->
      {{ with .Params.Categories }}
      <span id="post-categories">
        <ul>
          <li><strong>Categories</strong>:&nbsp;</li>
          {{ range . }}
          <li class="category-item"><a href="{{ $.Site.BaseURL }}categories/{{ . | urlize }}">{{ . }}</a> </li>
          {{ end }}
        </ul>
      </span>
      {{ end }}

      <!-- Tags -->
      {{ with .Params.tags }}
      <span id="post-tags">
        <ul>
          <li><strong>Tags</strong>:&nbsp;</li>
          {{ range . }}
          <li class="tag-item"><a href="{{ $.Site.BaseURL }}tags/{{ . | urlize }}"><em>{{ . }}</em></a> </li>
          {{ end }}
        </ul>
      </span>
      {{ end }}
    </div>
  </div>

  {{ .Content }}
  
<<<<<<< Updated upstream
  <div id="react-app-components" data-post-id="{{ .File.UniqueID }}"></div>
=======
>>>>>>> Stashed changes
</article>
<div id="react-single-actions" data-post-id="{{ .File.UniqueID }}"></div>

<<<<<<< Updated upstream
{{ if or $hasTOC .Params.Toc }}
<!-- Mobile TOC trigger + drawer (only shown on small screens via CSS) -->
<button class="mobile-toc-trigger" aria-controls="mobile-toc" aria-expanded="false" title="Index">☰</button>
<div class="mobile-toc-overlay" hidden></div>
<div id="mobile-toc" class="mobile-toc-drawer" aria-hidden="true" role="dialog" aria-label="Index">
  <div class="mobile-toc-header">
    <button class="mobile-toc-close" aria-label="close">×</button>
  </div>
  <nav class="mobile-toc-body">
    <!-- We'll clone the main TOC list into here via JS to avoid duplicate IDs -->
    <div class="mobile-toc-list"></div>
  </nav>
  <div class="mobile-safe-area-spacer"></div>
  </div>
{{ end }}
=======
<!-- AlphaTab styles copied by Vite build to /react/alphatab -->
<link rel="stylesheet" href="/react/alphatab/alphaTab.css" />
>>>>>>> Stashed changes

<script type="module" src="/react/page.bundle.js"></script>
{{ end }}